"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([[9276],{3023(e,n,i){i.d(n,{R:()=>c,x:()=>l});var s=i(6540);const r={},t=s.createContext(r);function c(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(t.Provider,{value:n},e.children)}},7360(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"module-1-nervous-system/ros-ii-fundamentals","title":"ROS-II Fundamentals: Middleware Architecture","description":"Overview","source":"@site/docs/module-1-nervous-system/ros-ii-fundamentals.md","sourceDirName":"module-1-nervous-system","slug":"/module-1-nervous-system/ros-ii-fundamentals","permalink":"/ai-native-book/docs/module-1-nervous-system/ros-ii-fundamentals","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module-1-nervous-system/ros-ii-fundamentals.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Introduction to Physical AI","permalink":"/ai-native-book/docs/module-1-nervous-system/intro"},"next":{"title":"NORD: NVIDIA Omniverse Robot Definition","permalink":"/ai-native-book/docs/module-1-nervous-system/nord-content"}}');var r=i(4848),t=i(3023);const c={sidebar_position:2},l="ROS-II Fundamentals: Middleware Architecture",a={},o=[{value:"Overview",id:"overview",level:2},{value:"Architecture and Design Philosophy",id:"architecture-and-design-philosophy",level:2},{value:"Client Library Architecture",id:"client-library-architecture",level:3},{value:"DDS-Based Communication",id:"dds-based-communication",level:3},{value:"Core Concepts",id:"core-concepts",level:2},{value:"Nodes",id:"nodes",level:3},{value:"Topics and Messages",id:"topics-and-messages",level:3},{value:"Services and Actions",id:"services-and-actions",level:3},{value:"Quality of Service (QoS) Policies",id:"quality-of-service-qos-policies",level:2},{value:"Reliability Policy",id:"reliability-policy",level:3},{value:"Durability Policy",id:"durability-policy",level:3},{value:"History Policy",id:"history-policy",level:3},{value:"Depth Policy",id:"depth-policy",level:3},{value:"Lifecycle Management",id:"lifecycle-management",level:2},{value:"Parameter System",id:"parameter-system",level:2},{value:"Launch System",id:"launch-system",level:2},{value:"Security Features",id:"security-features",level:2},{value:"Authentication",id:"authentication",level:3},{value:"Authorization",id:"authorization",level:3},{value:"Encryption",id:"encryption",level:3},{value:"Migration from ROS 1",id:"migration-from-ros-1",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Node Design",id:"node-design",level:3},{value:"Communication",id:"communication",level:3},{value:"Performance",id:"performance",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"ros-ii-fundamentals-middleware-architecture",children:"ROS-II Fundamentals: Middleware Architecture"})}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"Robot Operating System 2 (ROS 2) is a flexible framework for writing robot software that provides the services you would expect from an operating system, including hardware abstraction, device drivers, libraries, visualizers, message-passing, package management, and more. Unlike traditional operating systems, ROS 2 is not a single monolithic piece of software but a collection of tools, libraries, and conventions that facilitate the creation of complex and robust robot behavior across a heterogeneous cluster of processors."}),"\n",(0,r.jsx)(n.h2,{id:"architecture-and-design-philosophy",children:"Architecture and Design Philosophy"}),"\n",(0,r.jsx)(n.h3,{id:"client-library-architecture",children:"Client Library Architecture"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 uses a client library architecture that abstracts the underlying middleware implementation. This design allows for different middleware implementations while maintaining a consistent API for users:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Application   \u2502    \u2502   Application   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524    \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502   rclcpp/rclpy  \u2502    \u2502   rclcpp/rclpy  \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524    \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502   rmw layer     \u2502    \u2502   rmw layer     \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502    DDS Impl.    \u2502    \u2502    DDS Impl.    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(n.p,{children:"The architecture consists of:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Client Libraries"})," (rclcpp, rclpy): C++ and Python client libraries that provide the ROS 2 API"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ROS Middleware (rmw)"}),": Abstraction layer that interfaces with the underlying middleware"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"DDS Implementation"}),": Data Distribution Service that handles the actual message passing"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"dds-based-communication",children:"DDS-Based Communication"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 uses Data Distribution Service (DDS) as its underlying communication middleware, providing:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Real-time Performance"}),": Deterministic message delivery with bounded latency"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Scalability"}),": Support for large numbers of nodes and topics"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reliability"}),": Quality of Service (QoS) policies for message delivery guarantees"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Distributed Architecture"}),": Nodes can run on different machines without special configuration"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"core-concepts",children:"Core Concepts"}),"\n",(0,r.jsx)(n.h3,{id:"nodes",children:"Nodes"}),"\n",(0,r.jsx)(n.p,{children:"A node is an executable that uses ROS 2 to communicate with other nodes. In ROS 2, nodes are more isolated than in ROS 1:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:'#include "rclcpp/rclcpp.hpp"\n\nclass MinimalPublisher : public rclcpp::Node\n{\npublic:\n    MinimalPublisher()\n    : Node("minimal_publisher"), count_(0)\n    {\n        publisher_ = this->create_publisher<std_msgs::msg::String>("topic", 10);\n        timer_ = this->create_wall_timer(\n            500ms, std::bind(&MinimalPublisher::timer_callback, this));\n    }\n\nprivate:\n    void timer_callback()\n    {\n        auto message = std_msgs::msg::String();\n        message.data = "Hello, world! " + std::to_string(count_++);\n        RCLCPP_INFO(this->get_logger(), "Publishing: \'%s\'", message.data.c_str());\n        publisher_->publish(message);\n    }\n    rclcpp::TimerBase::SharedPtr timer_;\n    rclcpp::Publisher<std_msgs::msg::String>::SharedPtr publisher_;\n    size_t count_;\n};\n'})}),"\n",(0,r.jsx)(n.h3,{id:"topics-and-messages",children:"Topics and Messages"}),"\n",(0,r.jsx)(n.p,{children:"Topics are named buses over which nodes exchange messages. ROS 2 uses a more robust topic discovery mechanism:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:'// Publisher with QoS configuration\nauto publisher = this->create_publisher<std_msgs::msg::String>(\n    "topic_name",\n    rclcpp::QoS(rclcpp::KeepLast(10)).reliability(RMW_QOS_POLICY_RELIABILITY_RELIABLE)\n);\n\n// Subscriber with matching QoS\nauto subscription = this->create_subscription<std_msgs::msg::String>(\n    "topic_name",\n    rclcpp::QoS(rclcpp::KeepLast(10)).reliability(RMW_QOS_POLICY_RELIABILITY_RELIABLE),\n    [this](const std_msgs::msg::String::SharedPtr msg) {\n        RCLCPP_INFO(this->get_logger(), "I heard: \'%s\'", msg->data.c_str());\n    });\n'})}),"\n",(0,r.jsx)(n.h3,{id:"services-and-actions",children:"Services and Actions"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 introduces Actions as a new communication pattern for long-running tasks:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:'// Action server\nclass FibonacciActionServer : public rclcpp::Node\n{\npublic:\n    FibonacciActionServer()\n    : Node("fibonacci_action_server")\n    {\n        using namespace std::placeholders;\n\n        this->action_server_ = rclcpp_action::create_server<Fibonacci>(\n            this->get_node_base_interface(),\n            this->get_node_clock_interface(),\n            this->get_node_logging_interface(),\n            this->get_node_waitables_interface(),\n            "fibonacci",\n            std::bind(&FibonacciActionServer::handle_goal, this, _1, _2),\n            std::bind(&FibonacciActionServer::handle_cancel, this, _1),\n            std::bind(&FibonacciActionServer::handle_accepted, this, _1));\n    }\n\nprivate:\n    rclcpp_action::Server<Fibonacci>::SharedPtr action_server_;\n};\n'})}),"\n",(0,r.jsx)(n.h2,{id:"quality-of-service-qos-policies",children:"Quality of Service (QoS) Policies"}),"\n",(0,r.jsx)(n.p,{children:"QoS policies allow fine-tuning of communication behavior:"}),"\n",(0,r.jsx)(n.h3,{id:"reliability-policy",children:"Reliability Policy"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reliable"}),": All messages are delivered (at the cost of latency)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Best Effort"}),": Messages may be dropped (lower latency)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"durability-policy",children:"Durability Policy"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Transient Local"}),": Publishers send recent messages to new subscribers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Volatile"}),": No message persistence for late-joining subscribers"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"history-policy",children:"History Policy"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Keep Last"}),": Maintain a fixed number of most recent messages"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Keep All"}),": Maintain all messages (use with caution)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"depth-policy",children:"Depth Policy"}),"\n",(0,r.jsx)(n.p,{children:"Controls the number of messages in the queue when using Keep Last history policy."}),"\n",(0,r.jsx)(n.h2,{id:"lifecycle-management",children:"Lifecycle Management"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 introduces lifecycle nodes for better system management:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:'class LifecyclePublisher : public rclcpp_lifecycle::LifecycleNode\n{\npublic:\n    LifecyclePublisher() : rclcpp_lifecycle::LifecycleNode("lifecycle_publisher") {}\n\nprivate:\n    rclcpp_lifecycle::LifecyclePublisher<std_msgs::msg::String>::SharedPtr pub_;\n\n    rclcpp_lifecycle::node_interfaces::LifecycleNodeInterface::CallbackReturn\n    on_configure(const rclcpp_lifecycle::State &)\n    {\n        pub_ = this->create_publisher<std_msgs::msg::String>("lifecycle_chatter", 10);\n        RCLCPP_INFO(get_logger(), "Publisher created");\n        return rclcpp_lifecycle::node_interfaces::LifecycleNodeInterface::CallbackReturn::SUCCESS;\n    }\n\n    rclcpp_lifecycle::node_interfaces::LifecycleNodeInterface::CallbackReturn\n    on_activate(const rclcpp_lifecycle::State &)\n    {\n        pub_->on_activate();\n        RCLCPP_INFO(get_logger(), "Publisher activated");\n        return rclcpp_lifecycle::node_interfaces::LifecycleNodeInterface::CallbackReturn::SUCCESS;\n    }\n};\n'})}),"\n",(0,r.jsx)(n.h2,{id:"parameter-system",children:"Parameter System"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 has an improved parameter system with dynamic reconfiguration:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:'// Declare parameters with default values\nthis->declare_parameter("param_name", "default_value");\n\n// Get parameter value\nstd::string param_value;\nthis->get_parameter("param_name", param_value);\n\n// Set parameters from command line or launch files\nauto parameters_client = std::make_shared<rclcpp::AsyncParametersClient>(this);\nparameters_client->set_parameters({rclcpp::Parameter("param_name", "new_value")});\n'})}),"\n",(0,r.jsx)(n.h2,{id:"launch-system",children:"Launch System"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 uses Python-based launch files for complex system management:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    return LaunchDescription([\n        Node(\n            package='demo_nodes_cpp',\n            executable='talker',\n            name='talker',\n            parameters=[\n                {'param_name': 'param_value'}\n            ],\n            remappings=[\n                ('original_topic', 'remapped_topic')\n            ]\n        ),\n        Node(\n            package='demo_nodes_cpp',\n            executable='listener',\n            name='listener'\n        )\n    ])\n"})}),"\n",(0,r.jsx)(n.h2,{id:"security-features",children:"Security Features"}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 includes built-in security capabilities:"}),"\n",(0,r.jsx)(n.h3,{id:"authentication",children:"Authentication"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Identity verification of nodes"}),"\n",(0,r.jsx)(n.li,{children:"Certificate-based authentication"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"authorization",children:"Authorization"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Access control lists for topics and services"}),"\n",(0,r.jsx)(n.li,{children:"Role-based permissions"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"encryption",children:"Encryption"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Message payload encryption"}),"\n",(0,r.jsx)(n.li,{children:"Secure communication channels"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"migration-from-ros-1",children:"Migration from ROS 1"}),"\n",(0,r.jsx)(n.p,{children:"Key differences from ROS 1:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Middleware"}),": DDS-based instead of custom ROS 1 transport"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"API Changes"}),": New client libraries with improved design"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Quality of Service"}),": Configurable communication behavior"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Lifecycle Management"}),": Built-in node lifecycle management"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Security"}),": Native security features"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Real-time Support"}),": Better real-time capabilities"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cross-platform"}),": Improved Windows and macOS support"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsx)(n.h3,{id:"node-design",children:"Node Design"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Keep nodes focused on single responsibilities"}),"\n",(0,r.jsx)(n.li,{children:"Use composition for complex systems"}),"\n",(0,r.jsx)(n.li,{children:"Implement proper error handling"}),"\n",(0,r.jsx)(n.li,{children:"Follow naming conventions"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"communication",children:"Communication"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Choose appropriate QoS policies"}),"\n",(0,r.jsx)(n.li,{children:"Use services for request-response patterns"}),"\n",(0,r.jsx)(n.li,{children:"Use actions for long-running tasks"}),"\n",(0,r.jsx)(n.li,{children:"Avoid large message sizes"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"performance",children:"Performance"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use intra-process communication when possible"}),"\n",(0,r.jsx)(n.li,{children:"Optimize message serialization"}),"\n",(0,r.jsx)(n.li,{children:"Consider message frequency and size"}),"\n",(0,r.jsx)(n.li,{children:"Monitor network utilization"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"ROS 2 provides the robust middleware foundation needed for complex physical AI systems, enabling reliable communication between diverse hardware and software components in robotic applications."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);