"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([[6442],{2581(e,n,t){t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"module-1-nervous-system/interactive-ros-examples","title":"Interactive ROS Node Communication Examples","description":"Overview","source":"@site/docs/module-1-nervous-system/interactive-ros-examples.md","sourceDirName":"module-1-nervous-system","slug":"/module-1-nervous-system/interactive-ros-examples","permalink":"/ai-native-book/docs/module-1-nervous-system/interactive-ros-examples","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module-1-nervous-system/interactive-ros-examples.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8},"sidebar":"tutorialSidebar","previous":{"title":"Module 1 Assessment: ROS-II Concepts and Robotic Nervous System","permalink":"/ai-native-book/docs/module-1-nervous-system/module-1-assessment"},"next":{"title":"Testing Module 1 Content Navigation and Accessibility","permalink":"/ai-native-book/docs/module-1-nervous-system/testing-navigation-accessibility"}}');var s=t(4848),i=t(3023);const a={sidebar_position:8},l="Interactive ROS Node Communication Examples",o={},c=[{value:"Overview",id:"overview",level:2},{value:"Interactive Example 1: Publisher-Subscriber Pattern",id:"interactive-example-1-publisher-subscriber-pattern",level:2},{value:"Basic Publisher Node",id:"basic-publisher-node",level:3},{value:"Basic Subscriber Node",id:"basic-subscriber-node",level:3},{value:"Interactive Example 2: Service Client-Server Pattern",id:"interactive-example-2-service-client-server-pattern",level:2},{value:"Service Server Node",id:"service-server-node",level:3},{value:"Service Client Node",id:"service-client-node",level:3},{value:"Interactive Example 3: Action Client-Server Pattern",id:"interactive-example-3-action-client-server-pattern",level:2},{value:"Action Server Node",id:"action-server-node",level:3},{value:"Action Client Node",id:"action-client-node",level:3},{value:"Interactive Example 4: Parameter Server Usage",id:"interactive-example-4-parameter-server-usage",level:2},{value:"Parameter Server Node",id:"parameter-server-node",level:3},{value:"Interactive Simulation: ROS Node Communication Network",id:"interactive-simulation-ros-node-communication-network",level:2},{value:"Network Monitor Node",id:"network-monitor-node",level:3},{value:"Practical Exercise: Build Your Own Communication System",id:"practical-exercise-build-your-own-communication-system",level:2},{value:"Exercise 1: Temperature Monitoring System",id:"exercise-1-temperature-monitoring-system",level:3},{value:"Exercise 2: Robot Navigation System",id:"exercise-2-robot-navigation-system",level:3},{value:"Exercise 3: Multi-Robot Coordination",id:"exercise-3-multi-robot-coordination",level:3},{value:"Testing and Validation Tools",id:"testing-and-validation-tools",level:2},{value:"Basic Communication Test Script",id:"basic-communication-test-script",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"interactive-ros-node-communication-examples",children:"Interactive ROS Node Communication Examples"})}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"This section provides interactive examples and demonstrations of ROS node communication patterns. These examples include practical code implementations, simulation scenarios, and hands-on exercises that illustrate how ROS nodes communicate using different communication patterns."}),"\n",(0,s.jsx)(n.h2,{id:"interactive-example-1-publisher-subscriber-pattern",children:"Interactive Example 1: Publisher-Subscriber Pattern"}),"\n",(0,s.jsx)(n.h3,{id:"basic-publisher-node",children:"Basic Publisher Node"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\n\"\"\"\nInteractive ROS Publisher Example\nThis example demonstrates a publisher that publishes messages at a configurable rate\nand allows user interaction to modify the message content.\n\"\"\"\n\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\nfrom std_msgs.msg import Int32\nimport time\nimport threading\nimport sys\n\nclass InteractivePublisher(Node):\n    def __init__(self):\n        super().__init__('interactive_publisher')\n\n        # Create publishers\n        self.string_publisher = self.create_publisher(String, 'chatter', 10)\n        self.counter_publisher = self.create_publisher(Int32, 'counter', 10)\n\n        # Timer for publishing\n        self.timer = self.create_timer(0.5, self.timer_callback)  # Publish every 0.5 seconds\n\n        # Internal counter\n        self.counter = 0\n\n        # Interactive control\n        self.message_prefix = \"Hello\"\n        self.publish_enabled = True\n\n        # Start interactive input thread\n        self.input_thread = threading.Thread(target=self.interactive_input, daemon=True)\n        self.input_thread.start()\n\n        self.get_logger().info('Interactive Publisher Node Started')\n        self.get_logger().info('Commands: \"msg [text]\" to change message, \"stop/start\" to control publishing, \"quit\" to exit')\n\n    def timer_callback(self):\n        \"\"\"Callback function for the timer that publishes messages\"\"\"\n        if self.publish_enabled:\n            # Create and publish string message\n            msg = String()\n            msg.data = f'{self.message_prefix} - Counter: {self.counter}'\n            self.string_publisher.publish(msg)\n\n            # Create and publish counter message\n            counter_msg = Int32()\n            counter_msg.data = self.counter\n            self.counter_publisher.publish(counter_msg)\n\n            self.get_logger().info(f'Published: \"{msg.data}\" and counter: {counter_msg.data}')\n\n            self.counter += 1\n\n    def interactive_input(self):\n        \"\"\"Handle interactive user input in a separate thread\"\"\"\n        while rclpy.ok():\n            try:\n                user_input = input().strip()\n\n                if user_input.lower() == 'quit':\n                    self.get_logger().info('Quit command received. Shutting down...')\n                    rclpy.shutdown()\n                    sys.exit(0)\n                elif user_input.lower() == 'stop':\n                    self.publish_enabled = False\n                    self.get_logger().info('Publishing stopped')\n                elif user_input.lower() == 'start':\n                    self.publish_enabled = True\n                    self.get_logger().info('Publishing started')\n                elif user_input.startswith('msg '):\n                    new_message = user_input[4:]  # Remove 'msg ' prefix\n                    self.message_prefix = new_message\n                    self.get_logger().info(f'Message prefix changed to: \"{new_message}\"')\n                else:\n                    self.get_logger().info(f'Unknown command: {user_input}. Use: msg [text], stop, start, or quit')\n\n            except EOFError:\n                # Handle case where input is not available (e.g., in some environments)\n                time.sleep(0.1)\n                continue\n            except Exception as e:\n                self.get_logger().error(f'Error processing input: {e}')\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    publisher = InteractivePublisher()\n\n    try:\n        rclpy.spin(publisher)\n    except KeyboardInterrupt:\n        publisher.get_logger().info('Interrupted, shutting down...')\n    finally:\n        publisher.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,s.jsx)(n.h3,{id:"basic-subscriber-node",children:"Basic Subscriber Node"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\n\"\"\"\nInteractive ROS Subscriber Example\nThis example demonstrates a subscriber that processes messages and provides feedback\n\"\"\"\n\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\nfrom std_msgs.msg import Int32\n\nclass InteractiveSubscriber(Node):\n    def __init__(self):\n        super().__init__('interactive_subscriber')\n\n        # Create subscribers\n        self.string_subscription = self.create_subscription(\n            String,\n            'chatter',\n            self.string_listener_callback,\n            10)\n        self.string_subscription  # prevent unused variable warning\n\n        self.counter_subscription = self.create_subscription(\n            Int32,\n            'counter',\n            self.counter_listener_callback,\n            10)\n        self.counter_subscription  # prevent unused variable warning\n\n        self.received_count = 0\n        self.last_message = \"\"\n\n        self.get_logger().info('Interactive Subscriber Node Started')\n\n    def string_listener_callback(self, msg):\n        \"\"\"Callback function for string messages\"\"\"\n        self.received_count += 1\n        self.last_message = msg.data\n\n        self.get_logger().info(f'I heard: \"{msg.data}\"')\n        self.get_logger().info(f'Total messages received: {self.received_count}')\n\n        # Simple message analysis\n        words = msg.data.split()\n        word_count = len(words)\n        self.get_logger().info(f'Word count in message: {word_count}')\n\n    def counter_listener_callback(self, msg):\n        \"\"\"Callback function for counter messages\"\"\"\n        self.get_logger().info(f'Counter value: {msg.data}')\n\n        # Check for special conditions\n        if msg.data % 10 == 0 and msg.data != 0:\n            self.get_logger().info(f'Checkpoint reached: {msg.data} messages processed!')\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    subscriber = InteractiveSubscriber()\n\n    try:\n        rclpy.spin(subscriber)\n    except KeyboardInterrupt:\n        subscriber.get_logger().info('Interrupted, shutting down...')\n    finally:\n        subscriber.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,s.jsx)(n.h2,{id:"interactive-example-2-service-client-server-pattern",children:"Interactive Example 2: Service Client-Server Pattern"}),"\n",(0,s.jsx)(n.h3,{id:"service-server-node",children:"Service Server Node"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\n\"\"\"\nInteractive ROS Service Server Example\nThis example demonstrates a service that performs calculations based on user requests\n\"\"\"\n\nimport rclpy\nfrom rclpy.node import Node\nfrom example_interfaces.srv import AddTwoInts\n\nclass InteractiveServiceServer(Node):\n    def __init__(self):\n        super().__init__('interactive_service_server')\n\n        # Create service\n        self.srv = self.create_service(AddTwoInts, 'add_two_ints', self.add_two_ints_callback)\n\n        # Track service usage\n        self.request_count = 0\n\n        self.get_logger().info('Interactive Service Server Started')\n\n    def add_two_ints_callback(self, request, response):\n        \"\"\"Callback function for the service\"\"\"\n        self.request_count += 1\n\n        # Perform the calculation\n        result = request.a + request.b\n\n        # Log the request\n        self.get_logger().info(f'Incoming request: {request.a} + {request.b}')\n        self.get_logger().info(f'Sending response: {result}')\n        self.get_logger().info(f'Total requests processed: {self.request_count}')\n\n        # Set the response\n        response.sum = result\n\n        # Additional processing based on result\n        if result > 100:\n            self.get_logger().info('Large result detected (>100)')\n        elif result < 0:\n            self.get_logger().info('Negative result detected')\n        else:\n            self.get_logger().info('Normal result range')\n\n        return response\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    server = InteractiveServiceServer()\n\n    try:\n        rclpy.spin(server)\n    except KeyboardInterrupt:\n        server.get_logger().info('Interrupted, shutting down...')\n    finally:\n        server.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,s.jsx)(n.h3,{id:"service-client-node",children:"Service Client Node"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\n\"\"\"\nInteractive ROS Service Client Example\nThis example demonstrates a client that sends requests to the service server\n\"\"\"\n\nimport rclpy\nfrom rclpy.node import Node\nfrom example_interfaces.srv import AddTwoInts\nimport threading\nimport time\nimport sys\n\nclass InteractiveServiceClient(Node):\n    def __init__(self):\n        super().__init__('interactive_service_client')\n\n        # Create client\n        self.cli = self.create_client(AddTwoInts, 'add_two_ints')\n\n        # Wait for service to be available\n        while not self.cli.wait_for_service(timeout_sec=1.0):\n            self.get_logger().info('Service not available, waiting again...')\n\n        self.request_count = 0\n        self.successful_requests = 0\n\n        # Start interactive input thread\n        self.input_thread = threading.Thread(target=self.interactive_input, daemon=True)\n        self.input_thread.start()\n\n        self.get_logger().info('Interactive Service Client Started')\n        self.get_logger().info('Commands: \"add [num1] [num2]\" to send request, \"quit\" to exit')\n\n    def send_request(self, a, b):\n        \"\"\"Send a request to the service\"\"\"\n        self.request_count += 1\n\n        request = AddTwoInts.Request()\n        request.a = a\n        request.b = b\n\n        # Asynchronous call\n        future = self.cli.call_async(request)\n\n        # Wait for response with timeout\n        timer = self.create_timer(1.0, lambda: self.check_future(future, request))\n\n    def check_future(self, future, request):\n        \"\"\"Check if the future is complete\"\"\"\n        if future.done():\n            try:\n                response = future.result()\n                self.successful_requests += 1\n                self.get_logger().info(\n                    f'Result of {request.a} + {request.b} = {response.sum} '\n                    f'(Success rate: {self.successful_requests}/{self.request_count})'\n                )\n            except Exception as e:\n                self.get_logger().error(f'Service call failed: {e}')\n        else:\n            self.get_logger().info('Request still pending...')\n\n    def interactive_input(self):\n        \"\"\"Handle interactive user input\"\"\"\n        while rclpy.ok():\n            try:\n                user_input = input().strip()\n\n                if user_input.lower() == 'quit':\n                    self.get_logger().info('Quit command received. Shutting down...')\n                    rclpy.shutdown()\n                    sys.exit(0)\n                elif user_input.startswith('add '):\n                    try:\n                        parts = user_input.split()\n                        if len(parts) == 3:\n                            a = int(parts[1])\n                            b = int(parts[2])\n                            self.get_logger().info(f'Sending request: {a} + {b}')\n                            self.send_request(a, b)\n                        else:\n                            self.get_logger().info('Usage: add [num1] [num2]')\n                    except ValueError:\n                        self.get_logger().info('Invalid numbers. Usage: add [num1] [num2]')\n                else:\n                    self.get_logger().info(f'Unknown command: {user_input}. Use: add [num1] [num2] or quit')\n\n            except EOFError:\n                time.sleep(0.1)\n                continue\n            except Exception as e:\n                self.get_logger().error(f'Error processing input: {e}')\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    client = InteractiveServiceClient()\n\n    try:\n        rclpy.spin(client)\n    except KeyboardInterrupt:\n        client.get_logger().info('Interrupted, shutting down...')\n    finally:\n        client.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,s.jsx)(n.h2,{id:"interactive-example-3-action-client-server-pattern",children:"Interactive Example 3: Action Client-Server Pattern"}),"\n",(0,s.jsx)(n.h3,{id:"action-server-node",children:"Action Server Node"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'#!/usr/bin/env python3\n"""\nInteractive ROS Action Server Example\nThis example demonstrates a Fibonacci action server with feedback\n"""\n\nimport rclpy\nfrom rclpy.action import ActionServer, CancelResponse, GoalResponse\nfrom rclpy.node import Node\nfrom example_interfaces.action import Fibonacci\n\nclass InteractiveActionServer(Node):\n    def __init__(self):\n        super().__init__(\'interactive_fibonacci_action_server\')\n\n        # Create action server\n        self._action_server = ActionServer(\n            self,\n            Fibonacci,\n            \'fibonacci\',\n            execute_callback=self.execute_callback,\n            callback_group=None,\n            goal_callback=self.goal_callback,\n            handle_accepted_callback=self.handle_accepted_callback,\n            cancel_callback=self.cancel_callback)\n\n        self.get_logger().info(\'Interactive Fibonacci Action Server Started\')\n\n    def destroy(self):\n        self._action_server.destroy()\n        super().destroy_node()\n\n    def goal_callback(self, goal_request):\n        """Accept or reject a client request to begin an action"""\n        self.get_logger().info(\'Received goal request\')\n        return GoalResponse.ACCEPT\n\n    def handle_accepted_callback(self, goal_handle):\n        """Handle an accepted goal"""\n        self.get_logger().info(\'Goal accepted, executing...\')\n        # Start executing the action in a separate thread\n        import threading\n        thread = threading.Thread(target=self.execute, args=(goal_handle,))\n        thread.start()\n\n    def cancel_callback(self, goal_handle):\n        """Accept or reject a client request to cancel an action"""\n        self.get_logger().info(\'Received cancel request\')\n        return CancelResponse.ACCEPT\n\n    def execute(self, goal_handle):\n        """Execute the goal and provide feedback"""\n        self.get_logger().info(\'Executing goal...\')\n\n        # Get the order from the goal\n        order = goal_handle.request.order\n\n        # Feedback and result\n        feedback_msg = Fibonacci.Feedback()\n        result_msg = Fibonacci.Result()\n\n        # Start the Fibonacci sequence\n        fibonacci_sequence = [0, 1]\n\n        # Provide initial feedback\n        feedback_msg.sequence = fibonacci_sequence[:min(2, order)]\n        goal_handle.publish_feedback(feedback_msg)\n\n        # Calculate the Fibonacci sequence up to the requested order\n        for i in range(1, order):\n            if goal_handle.is_cancel_requested:\n                self.get_logger().info(\'Goal was canceled\')\n                goal_handle.canceled()\n                result_msg.sequence = fibonacci_sequence\n                return result_msg\n\n            # Check if goal was aborted\n            if not goal_handle.is_active:\n                self.get_logger().info(\'Goal was aborted\')\n                result_msg.sequence = fibonacci_sequence\n                return result_msg\n\n            # Calculate next Fibonacci number\n            next_fib = fibonacci_sequence[i] + fibonacci_sequence[i-1]\n            fibonacci_sequence.append(next_fib)\n\n            # Publish feedback periodically\n            if i % 2 == 0:  # Provide feedback every 2 steps\n                feedback_msg.sequence = fibonacci_sequence\n                goal_handle.publish_feedback(feedback_msg)\n                self.get_logger().info(f\'Feedback: {fibonacci_sequence}\')\n\n            # Simulate some processing time\n            time.sleep(0.1)\n\n        # Check if goal was canceled after completion\n        if goal_handle.is_cancel_requested:\n            self.get_logger().info(\'Goal was canceled\')\n            goal_handle.canceled()\n            result_msg.sequence = fibonacci_sequence\n            return result_msg\n\n        # Set the result and return\n        goal_handle.succeed()\n        result_msg.sequence = fibonacci_sequence\n\n        self.get_logger().info(f\'Result: {fibonacci_sequence}\')\n        return result_msg\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    action_server = InteractiveActionServer()\n\n    try:\n        rclpy.spin(action_server)\n    except KeyboardInterrupt:\n        action_server.get_logger().info(\'Interrupted, shutting down...\')\n    finally:\n        action_server.destroy()\n        rclpy.shutdown()\n\nif __name__ == \'__main__\':\n    import time  # Added for the sleep in execute method\n    main()\n'})}),"\n",(0,s.jsx)(n.h3,{id:"action-client-node",children:"Action Client Node"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\n\"\"\"\nInteractive ROS Action Client Example\nThis example demonstrates a Fibonacci action client with feedback handling\n\"\"\"\n\nimport rclpy\nfrom rclpy.action import ActionClient\nfrom rclpy.node import Node\nfrom example_interfaces.action import Fibonacci\nimport threading\nimport time\nimport sys\n\nclass InteractiveActionClient(Node):\n    def __init__(self):\n        super().__init__('interactive_fibonacci_action_client')\n\n        # Create action client\n        self._action_client = ActionClient(self, Fibonacci, 'fibonacci')\n\n        # Wait for action server\n        self.get_logger().info('Waiting for action server...')\n        self._action_client.wait_for_server()\n\n        # Start interactive input thread\n        self.input_thread = threading.Thread(target=self.interactive_input, daemon=True)\n        self.input_thread.start()\n\n        self.get_logger().info('Interactive Fibonacci Action Client Started')\n        self.get_logger().info('Commands: \"fib [order]\" to start Fibonacci calculation, \"quit\" to exit')\n\n    def send_goal(self, order):\n        \"\"\"Send a goal to the action server\"\"\"\n        self.get_logger().info(f'Sending Fibonacci goal with order: {order}')\n\n        # Create goal message\n        goal_msg = Fibonacci.Goal()\n        goal_msg.order = order\n\n        # Send goal async\n        self._send_goal_future = self._action_client.send_goal_async(\n            goal_msg,\n            feedback_callback=self.feedback_callback)\n\n        # Set result callback\n        self._send_goal_future.add_done_callback(self.goal_response_callback)\n\n    def goal_response_callback(self, future):\n        \"\"\"Handle the goal response\"\"\"\n        goal_handle = future.result()\n        if not goal_handle.accepted:\n            self.get_logger().info('Goal rejected :(')\n            return\n\n        self.get_logger().info('Goal accepted :)')\n\n        # Get result async\n        self._get_result_future = goal_handle.get_result_async()\n        self._get_result_future.add_done_callback(self.get_result_callback)\n\n    def get_result_callback(self, future):\n        \"\"\"Handle the result\"\"\"\n        result = future.result().result\n        self.get_logger().info(f'Result: {result.sequence}')\n\n    def feedback_callback(self, feedback_msg):\n        \"\"\"Handle feedback from the action server\"\"\"\n        feedback = feedback_msg.feedback\n        self.get_logger().info(f'Received feedback: {feedback.sequence}')\n\n    def interactive_input(self):\n        \"\"\"Handle interactive user input\"\"\"\n        while rclpy.ok():\n            try:\n                user_input = input().strip()\n\n                if user_input.lower() == 'quit':\n                    self.get_logger().info('Quit command received. Shutting down...')\n                    rclpy.shutdown()\n                    sys.exit(0)\n                elif user_input.startswith('fib '):\n                    try:\n                        parts = user_input.split()\n                        if len(parts) == 2:\n                            order = int(parts[1])\n                            if order > 0:\n                                self.send_goal(order)\n                            else:\n                                self.get_logger().info('Order must be positive')\n                        else:\n                            self.get_logger().info('Usage: fib [order]')\n                    except ValueError:\n                        self.get_logger().info('Invalid number. Usage: fib [order]')\n                else:\n                    self.get_logger().info(f'Unknown command: {user_input}. Use: fib [order] or quit')\n\n            except EOFError:\n                time.sleep(0.1)\n                continue\n            except Exception as e:\n                self.get_logger().error(f'Error processing input: {e}')\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    action_client = InteractiveActionClient()\n\n    try:\n        rclpy.spin(action_client)\n    except KeyboardInterrupt:\n        action_client.get_logger().info('Interrupted, shutting down...')\n    finally:\n        action_client.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,s.jsx)(n.h2,{id:"interactive-example-4-parameter-server-usage",children:"Interactive Example 4: Parameter Server Usage"}),"\n",(0,s.jsx)(n.h3,{id:"parameter-server-node",children:"Parameter Server Node"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\n\"\"\"\nInteractive ROS Parameter Server Example\nThis example demonstrates dynamic parameter configuration\n\"\"\"\n\nimport rclpy\nfrom rclpy.node import Node\nfrom rclpy.parameter import Parameter\nfrom rclpy.qos import qos_profile_system_default\nimport threading\nimport time\nimport sys\n\nclass InteractiveParameterNode(Node):\n    def __init__(self):\n        super().__init__('interactive_parameter_node')\n\n        # Declare parameters with default values\n        self.declare_parameter('robot_name', 'default_robot')\n        self.declare_parameter('max_velocity', 1.0)\n        self.declare_parameter('safety_distance', 0.5)\n        self.declare_parameter('operating_mode', 'normal')\n        self.declare_parameter('debug_level', 1)\n\n        # Register parameter callback\n        self.add_on_set_parameters_callback(self.parameter_callback)\n\n        # Internal state\n        self.robot_name = self.get_parameter('robot_name').value\n        self.max_velocity = self.get_parameter('max_velocity').value\n        self.safety_distance = self.get_parameter('safety_distance').value\n        self.operating_mode = self.get_parameter('operating_mode').value\n        self.debug_level = self.get_parameter('debug_level').value\n\n        # Timer for periodic parameter updates\n        self.timer = self.create_timer(2.0, self.timer_callback)\n\n        # Start interactive input thread\n        self.input_thread = threading.Thread(target=self.interactive_input, daemon=True)\n        self.input_thread.start()\n\n        self.get_logger().info('Interactive Parameter Node Started')\n        self.get_logger().info('Current parameters:')\n        self.print_current_parameters()\n        self.get_logger().info('Commands: \"set [name] [value]\", \"list\", \"quit\"')\n\n    def parameter_callback(self, params):\n        \"\"\"Callback for parameter changes\"\"\"\n        result = SetParametersResult()\n        result.successful = True\n        result.reason = 'Parameters set successfully'\n\n        for param in params:\n            if param.name == 'robot_name' and param.type_ == Parameter.Type.STRING:\n                self.robot_name = param.value\n                self.get_logger().info(f'Robot name updated to: {param.value}')\n            elif param.name == 'max_velocity' and param.type_ == Parameter.Type.DOUBLE:\n                if param.value > 0 and param.value <= 5.0:  # Reasonable velocity limits\n                    self.max_velocity = param.value\n                    self.get_logger().info(f'Max velocity updated to: {param.value}')\n                else:\n                    result.successful = False\n                    result.reason = 'Max velocity must be between 0 and 5.0'\n            elif param.name == 'safety_distance' and param.type_ == Parameter.Type.DOUBLE:\n                if param.value > 0 and param.value <= 2.0:  # Reasonable distance limits\n                    self.safety_distance = param.value\n                    self.get_logger().info(f'Safety distance updated to: {param.value}')\n                else:\n                    result.successful = False\n                    result.reason = 'Safety distance must be between 0 and 2.0'\n            elif param.name == 'operating_mode' and param.type_ == Parameter.Type.STRING:\n                if param.value in ['normal', 'debug', 'maintenance', 'emergency']:\n                    self.operating_mode = param.value\n                    self.get_logger().info(f'Operating mode updated to: {param.value}')\n                else:\n                    result.successful = False\n                    result.reason = 'Operating mode must be normal, debug, maintenance, or emergency'\n            elif param.name == 'debug_level' and param.type_ == Parameter.Type.INTEGER:\n                if param.value >= 0 and param.value <= 3:\n                    self.debug_level = param.value\n                    self.get_logger().info(f'Debug level updated to: {param.value}')\n                else:\n                    result.successful = False\n                    result.reason = 'Debug level must be between 0 and 3'\n            else:\n                result.successful = False\n                result.reason = f'Invalid parameter: {param.name} or invalid type'\n\n        return result\n\n    def timer_callback(self):\n        \"\"\"Periodic timer callback to demonstrate parameter usage\"\"\"\n        self.get_logger().info(\n            f'Robot: {self.robot_name}, Mode: {self.operating_mode}, '\n            f'Vel: {self.max_velocity}m/s, Safe dist: {self.safety_distance}m'\n        )\n\n    def print_current_parameters(self):\n        \"\"\"Print current parameter values\"\"\"\n        self.get_logger().info(f'  robot_name: {self.robot_name}')\n        self.get_logger().info(f'  max_velocity: {self.max_velocity}')\n        self.get_logger().info(f'  safety_distance: {self.safety_distance}')\n        self.get_logger().info(f'  operating_mode: {self.operating_mode}')\n        self.get_logger().info(f'  debug_level: {self.debug_level}')\n\n    def interactive_input(self):\n        \"\"\"Handle interactive user input\"\"\"\n        while rclpy.ok():\n            try:\n                user_input = input().strip()\n\n                if user_input.lower() == 'quit':\n                    self.get_logger().info('Quit command received. Shutting down...')\n                    rclpy.shutdown()\n                    sys.exit(0)\n                elif user_input.lower() == 'list':\n                    self.get_logger().info('Current parameters:')\n                    self.print_current_parameters()\n                elif user_input.startswith('set '):\n                    parts = user_input.split()\n                    if len(parts) >= 3:\n                        param_name = parts[1]\n                        param_value = ' '.join(parts[2:])  # Handle values with spaces\n\n                        # Try to determine parameter type and set it\n                        try:\n                            # Try as integer first\n                            int_val = int(param_value)\n                            self.set_parameters([Parameter(param_name, Parameter.Type.INTEGER, int_val)])\n                        except ValueError:\n                            try:\n                                # Try as float\n                                float_val = float(param_value)\n                                self.set_parameters([Parameter(param_name, Parameter.Type.DOUBLE, float_val)])\n                            except ValueError:\n                                # Assume string\n                                self.set_parameters([Parameter(param_name, Parameter.Type.STRING, param_value)])\n                    else:\n                        self.get_logger().info('Usage: set [param_name] [value]')\n                else:\n                    self.get_logger().info(f'Unknown command: {user_input}. Use: set [name] [value], list, or quit')\n\n            except EOFError:\n                time.sleep(0.1)\n                continue\n            except Exception as e:\n                self.get_logger().error(f'Error processing input: {e}')\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    # Import here to avoid circular dependency issues\n    from rclpy.parameter_service import SetParametersResult\n\n    param_node = InteractiveParameterNode()\n\n    try:\n        rclpy.spin(param_node)\n    except KeyboardInterrupt:\n        param_node.get_logger().info('Interrupted, shutting down...')\n    finally:\n        param_node.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,s.jsx)(n.h2,{id:"interactive-simulation-ros-node-communication-network",children:"Interactive Simulation: ROS Node Communication Network"}),"\n",(0,s.jsx)(n.h3,{id:"network-monitor-node",children:"Network Monitor Node"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'#!/usr/bin/env python3\n"""\nROS Network Monitor\nThis example demonstrates monitoring and visualizing ROS communication patterns\n"""\n\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\nfrom rclpy.qos import qos_profile_system_default\nimport threading\nimport time\nfrom collections import defaultdict, deque\nimport json\n\nclass ROSNetworkMonitor(Node):\n    def __init__(self):\n        super().__init__(\'ros_network_monitor\')\n\n        # Data structures for monitoring\n        self.topic_subscribers = defaultdict(list)\n        self.topic_publishers = defaultdict(list)\n        self.message_history = defaultdict(lambda: deque(maxlen=100))  # Keep last 100 messages per topic\n        self.node_connections = defaultdict(set)\n\n        # Setup monitoring timer\n        self.monitor_timer = self.create_timer(1.0, self.monitor_callback)\n\n        # Setup network analysis timer\n        self.analysis_timer = self.create_timer(5.0, self.analysis_callback)\n\n        # Start interactive input thread\n        self.input_thread = threading.Thread(target=self.interactive_input, daemon=True)\n        self.input_thread.start()\n\n        self.get_logger().info(\'ROS Network Monitor Started\')\n        self.get_logger().info(\'Commands: "topics", "nodes", "stats", "quit"\')\n\n    def monitor_callback(self):\n        """Monitor current network state"""\n        # In a real implementation, this would query the ROS graph\n        # For this example, we\'ll just log that monitoring is active\n        self.get_logger().info(\'Monitoring network activity...\')\n\n    def analysis_callback(self):\n        """Perform network analysis"""\n        # This would analyze the network topology and communication patterns\n        self.get_logger().info(\'Network analysis completed\')\n        self.get_logger().info(f\'Tracked topics: {list(self.message_history.keys())}\')\n\n    def interactive_input(self):\n        """Handle interactive user input"""\n        while rclpy.ok():\n            try:\n                user_input = input().strip()\n\n                if user_input.lower() == \'quit\':\n                    self.get_logger().info(\'Quit command received. Shutting down...\')\n                    rclpy.shutdown()\n                    sys.exit(0)\n                elif user_input.lower() == \'topics\':\n                    self.list_topics()\n                elif user_input.lower() == \'nodes\':\n                    self.list_nodes()\n                elif user_input.lower() == \'stats\':\n                    self.show_statistics()\n                else:\n                    self.get_logger().info(f\'Unknown command: {user_input}. Use: topics, nodes, stats, or quit\')\n\n            except EOFError:\n                time.sleep(0.1)\n                continue\n            except Exception as e:\n                self.get_logger().error(f\'Error processing input: {e}\')\n\n    def list_topics(self):\n        """List all topics with their message counts"""\n        self.get_logger().info(\'Tracked Topics:\')\n        for topic, messages in self.message_history.items():\n            self.get_logger().info(f\'  {topic}: {len(messages)} messages\')\n\n    def list_nodes(self):\n        """List all nodes (in a real system, this would query the graph)"""\n        self.get_logger().info(\'Active Nodes: [This would show real node information in a complete implementation]\')\n\n    def show_statistics(self):\n        """Show network statistics"""\n        total_messages = sum(len(messages) for messages in self.message_history.values())\n        self.get_logger().info(f\'Total tracked messages: {total_messages}\')\n        self.get_logger().info(f\'Tracked topics: {len(self.message_history)}\')\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    monitor = ROSNetworkMonitor()\n\n    try:\n        rclpy.spin(monitor)\n    except KeyboardInterrupt:\n        monitor.get_logger().info(\'Interrupted, shutting down...\')\n    finally:\n        monitor.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == \'__main__\':\n    main()\n'})}),"\n",(0,s.jsx)(n.h2,{id:"practical-exercise-build-your-own-communication-system",children:"Practical Exercise: Build Your Own Communication System"}),"\n",(0,s.jsx)(n.h3,{id:"exercise-1-temperature-monitoring-system",children:"Exercise 1: Temperature Monitoring System"}),"\n",(0,s.jsx)(n.p,{children:"Create a ROS system with:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"A sensor node that publishes temperature readings"}),"\n",(0,s.jsx)(n.li,{children:"A monitor node that subscribes to temperature data and alerts if thresholds are exceeded"}),"\n",(0,s.jsx)(n.li,{children:"A control node that can adjust system parameters via services"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"exercise-2-robot-navigation-system",children:"Exercise 2: Robot Navigation System"}),"\n",(0,s.jsx)(n.p,{children:"Create a navigation system with:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"A path planner node that provides navigation goals via actions"}),"\n",(0,s.jsx)(n.li,{children:"A robot controller node that executes navigation commands"}),"\n",(0,s.jsx)(n.li,{children:"A safety monitor node that can cancel dangerous operations"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"exercise-3-multi-robot-coordination",children:"Exercise 3: Multi-Robot Coordination"}),"\n",(0,s.jsx)(n.p,{children:"Design a system where multiple robots coordinate:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Each robot publishes its status and position"}),"\n",(0,s.jsx)(n.li,{children:"A central coordinator manages task assignment"}),"\n",(0,s.jsx)(n.li,{children:"Robots can request assistance from each other"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"testing-and-validation-tools",children:"Testing and Validation Tools"}),"\n",(0,s.jsx)(n.h3,{id:"basic-communication-test-script",children:"Basic Communication Test Script"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'#!/usr/bin/env python3\n"""\nROS Communication Test Script\nThis script helps validate basic ROS communication patterns\n"""\n\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String, Int32, Float32\nfrom std_msgs.msg import Header\nimport time\n\nclass CommunicationTester(Node):\n    def __init__(self):\n        super().__init__(\'communication_tester\')\n\n        # Test publishers\n        self.test_publisher = self.create_publisher(String, \'test_topic\', 10)\n        self.int_publisher = self.create_publisher(Int32, \'test_int\', 10)\n        self.float_publisher = self.create_publisher(Float32, \'test_float\', 10)\n\n        # Test subscribers\n        self.test_subscription = self.create_subscription(\n            String, \'test_topic\', self.test_callback, 10)\n        self.int_subscription = self.create_subscription(\n            Int32, \'test_int\', self.int_callback, 10)\n        self.float_subscription = self.create_subscription(\n            Float32, \'test_float\', self.float_callback, 10)\n\n        # Test timer\n        self.timer = self.create_timer(1.0, self.test_timer)\n        self.test_counter = 0\n\n        self.get_logger().info(\'Communication Tester Started\')\n\n    def test_timer(self):\n        """Send test messages"""\n        # Send string message\n        msg = String()\n        msg.data = f\'Test message {self.test_counter}\'\n        self.test_publisher.publish(msg)\n\n        # Send int message\n        int_msg = Int32()\n        int_msg.data = self.test_counter\n        self.int_publisher.publish(int_msg)\n\n        # Send float message\n        float_msg = Float32()\n        float_msg.data = float(self.test_counter) * 1.5\n        self.float_publisher.publish(float_msg)\n\n        self.test_counter += 1\n        self.get_logger().info(f\'Sent test messages #{self.test_counter}\')\n\n    def test_callback(self, msg):\n        """Handle string test message"""\n        self.get_logger().info(f\'Received string: {msg.data}\')\n\n    def int_callback(self, msg):\n        """Handle int test message"""\n        self.get_logger().info(f\'Received int: {msg.data}\')\n\n    def float_callback(self, msg):\n        """Handle float test message"""\n        self.get_logger().info(f\'Received float: {msg.data}\')\n\ndef run_basic_tests():\n    """Run basic communication tests"""\n    rclpy.init()\n\n    tester = CommunicationTester()\n\n    # Run for 10 seconds\n    start_time = time.time()\n    while time.time() - start_time < 10.0:\n        rclpy.spin_once(tester, timeout_sec=0.1)\n\n    tester.destroy_node()\n    rclpy.shutdown()\n    print("Basic communication tests completed!")\n\nif __name__ == \'__main__\':\n    run_basic_tests()\n'})}),"\n",(0,s.jsx)(n.p,{children:"These interactive examples provide hands-on experience with ROS node communication patterns, demonstrating publishers/subscribers, services, actions, parameters, and network monitoring. Each example includes practical code that can be run and modified to explore different aspects of ROS communication."})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},3023(e,n,t){t.d(n,{R:()=>a,x:()=>l});var r=t(6540);const s={},i=r.createContext(s);function a(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);